(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{23:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(24),i=n.n(r),a=(n(37),n(2)),l=n(25),o=n.n(l),u=n(6),d=(n(38),n(8)),j=(n(23),n(0));var b=function(e){var t=e.currentUser,n=e.setCurrentUser,s=e.theme,r=e.setRoutines,i=e.setExercises,a=Object(u.f)();return Object(c.useEffect)((function(){fetch("/current_user").then((function(e){return e.json()})).then((function(e){e.username?n(e):n(null)}))}),[n]),t?Object(j.jsxs)("div",{className:"nav-bar",children:[Object(j.jsxs)("div",{className:"nav-text-holder",children:[Object(j.jsx)("img",{id:"dark"==s?"navbar-logo":"navbar-logo-light",src:"light"==s?"https://i.ibb.co/VvJKVfD/Screen-Shot-2022-04-18-at-1-54-37-PM-removebg.png":"https://i.ibb.co/R48qFKz/Screen-Shot-2022-04-11-at-1-50-41-PM-removebg.png"}),Object(j.jsx)(d.b,{to:"/".concat(t.id,"/profile"),className:"nav-text",children:Object(j.jsx)("h3",{className:"nav-text",children:t.name})})]}),Object(j.jsx)("div",{className:"nav-text-holder",children:Object(j.jsx)(d.b,{to:"/".concat(t.id,"/routines"),className:"nav-text",children:Object(j.jsx)("h3",{className:"nav-text",children:"Routines"})})}),Object(j.jsx)("div",{className:"nav-text-holder",children:Object(j.jsx)("h3",{className:"nav-text",onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(e){a.push("/login"),n(null),r([]),i([])}))},children:"Log Out"})})]}):Object(j.jsxs)("div",{className:"nav-bar",children:[Object(j.jsx)("img",{id:"dark"==s?"navbar-logo":"navbar-logo-light",src:"light"==s?"https://i.ibb.co/VvJKVfD/Screen-Shot-2022-04-18-at-1-54-37-PM-removebg.png":"https://i.ibb.co/R48qFKz/Screen-Shot-2022-04-11-at-1-50-41-PM-removebg.png"}),Object(j.jsx)("div",{className:"nav-text-holder"}),Object(j.jsx)("div",{className:"nav-text-holder"}),Object(j.jsxs)("div",{className:"nav-text-holder",children:[Object(j.jsx)(d.b,{to:"/signup",className:"nav-text",children:Object(j.jsx)("h3",{className:"nav-text",children:"Sign Up"})}),Object(j.jsx)(d.b,{to:"/login",className:"nav-text",children:Object(j.jsx)("h3",{className:"nav-text",children:"Log In"})})]})]})};var h=function(e){var t=e.switchTheme,n=e.theme,c=e.setModal,s=e.userId,r=e.setEdit,i=e.search,a=e.setSearch,l=Object(u.f)();return Object(j.jsxs)("div",{id:"search-div",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{id:"new-routine",title:"create new routine",onClick:function(){c(!0),r(!1),l.push("/".concat(s,"/routines"))},className:"button",children:"Create Routine"}),Object(j.jsx)("input",{id:"search-bar",placeholder:"Search",value:i,onChange:function(e){a(e.target.value)}})]}),Object(j.jsx)("button",{onClick:t,className:"toggle-light-mode",title:"light"===n?"switch to dark mode":"switch to light mode",children:"light"===n?"\u2600\ufe0f":"\ud83c\udf19 "})]})},m=(n(48),n(28)),O=n(29),x=n(30),p=n(32),f=(n(49),n(31)),v=n(56),g=n(64),N=n(57),S=n(58),C=n(59),y=n(60),E=n(61),k=n(62),M=n(65),w=n(63),T=function(e){Object(x.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(m.a)(this,n);for(var c=arguments.length,s=new Array(c),r=0;r<c;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={currentMonth:new Date,selectedDate:new Date},e.nextMonth=function(){e.setState({currentMonth:Object(f.a)(e.state.currentMonth,1)})},e.prevMonth=function(){e.setState({currentMonth:Object(v.a)(e.state.currentMonth,1)})},e}return Object(O.a)(n,[{key:"renderHeader",value:function(){return Object(j.jsxs)("div",{className:"header row flex-middle",children:[Object(j.jsx)("div",{className:"col col-start",children:Object(j.jsx)("div",{className:"icon",onClick:this.prevMonth,children:"chevron_left"})}),Object(j.jsx)("div",{className:"col col-center",children:Object(j.jsx)("span",{children:Object(g.a)(this.state.currentMonth,"MMMM yyyy")})}),Object(j.jsx)("div",{className:"col col-end",onClick:this.nextMonth,children:Object(j.jsx)("div",{className:"icon",children:"chevron_right"})})]})}},{key:"renderDays",value:function(){for(var e=[],t=Object(N.a)(this.state.currentMonth),n=0;n<7;n++)e.push(Object(j.jsx)("div",{className:"col col-center",children:Object(g.a)(Object(S.a)(t,n),"EEE")},n));return Object(j.jsx)("div",{className:"days row",children:e})}},{key:"renderCells",value:function(){for(var e=this.state,t=e.currentMonth,n=(e.selectedDate,Object(C.a)(t)),c=Object(y.a)(n),s=Object(N.a)(n),r=Object(E.a)(c),i=[],a=this.props.values,l=[],o=s,u="";o<=r;){for(var d=0;d<7;d++){u=Object(g.a)(o,"d");var b=Object(g.a)(o,"yyyy-mm-dd"),h=a.filter((function(e){return Object(k.a)(Object(M.a)(e.date),o)}));l.push(Object(j.jsx)("div",{className:"col cell ".concat(Object(w.a)(o,n)?"":"disabled"," tooltip"),style:Object(w.a)(o,n)&&h.length?{background:"var(--practice-day)"}:null,children:Object(w.a)(o,n)?Object(j.jsxs)("span",{children:[Object(j.jsx)("span",{className:"number",children:u}),this.props.toolTip?Object(j.jsx)("span",{className:"tooltiptext",children:b}):null]}):null},o)),o=Object(S.a)(o,1)}i.push(Object(j.jsx)("div",{className:"row",children:l},o)),l=[]}return Object(j.jsx)("div",{className:"body",children:i})}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"calendar",children:[this.renderHeader(),this.renderDays(),this.renderCells()]})}}]),n}(s.a.Component),U=T;var D=function(e){var t=e.theme,n=e.setCurrentUser,s=e.currentUser,r=e.routineCount,i=e.exerciseCount,l=Object(c.useState)(),o=Object(a.a)(l,2),d=o[0],b=o[1],h=Object(c.useState)(),m=Object(a.a)(h,2),O=m[0],x=m[1],p=Object(c.useState)(!1),f=Object(a.a)(p,2),v=f[0],g=f[1],N=Object(c.useState)([]),S=Object(a.a)(N,2),C=S[0],y=S[1],E=Object(c.useState)(!1),k=Object(a.a)(E,2),M=k[0],w=k[1],T=Object(u.f)();return Object(c.useEffect)((function(){g(!1),fetch("/calendar_dates").then((function(e){return e.json()})).then((function(e){y(e)}))}),[]),s?Object(j.jsxs)("div",{className:"profile-holder",children:[Object(j.jsxs)("div",{id:"left-profile-page",children:[Object(j.jsx)("img",{className:"main-profile-img",src:"light"==t?"https://i.ibb.co/0t4gR4Y/Screen-Shot-2022-04-11-at-12-31-51-PM-modified.png":"https://i.ibb.co/zSX5Ncj/Screen-Shot-2022-04-11-at-12-31-32-PM-modified.png"}),Object(j.jsxs)("div",{className:"profile-details",children:[v?Object(j.jsx)("input",{className:"profile-input",defaultValue:s.name,value:O,onChange:function(e){return x(e.target.value)}}):Object(j.jsx)("h1",{children:s.name}),v?Object(j.jsx)("input",{className:"profile-input",defaultValue:s.bio,value:d,onChange:function(e){return b(e.target.value)}}):Object(j.jsxs)("h3",{children:["Bio: ",s.bio]}),v?Object(j.jsx)("button",{className:"button",id:"save-profile",onClick:function(){fetch("/users/".concat(s.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:O,bio:d})}).then((function(e){return e.json()})).then((function(e){e.errors?console.log(e.errors):n(e),g(!1)}))},children:"Save"}):null]}),Object(j.jsxs)("div",{className:"created-details",children:[Object(j.jsx)("h2",{children:"Routines created:"}),Object(j.jsx)("h2",{children:r})]}),Object(j.jsxs)("div",{className:"created-details",children:[Object(j.jsx)("h2",{children:"Exercises created:"}),Object(j.jsx)("h2",{children:i})]}),M?Object(j.jsx)("p",{className:"error",children:"Account deletion cannot be undone! Are you sure?"}):null,Object(j.jsxs)("div",{className:"profile-buttons",children:[M?Object(j.jsx)("button",{id:"confirm-delete",className:"button",onClick:function(){fetch("/users/".concat(s.id),{method:"DELETE"}),n(null),T.push("/login")},children:"Yes, Delete"}):Object(j.jsx)("button",{id:"edit-account",className:"button",onClick:function(){g(!v)},children:v?"Cancel":"Edit Profile"}),Object(j.jsx)("button",{onClick:function(){return w(!M)},id:"delete-account",className:"button",children:M?"Cancel":"Delete Account"})]})]}),Object(j.jsx)("div",{id:"right-profile-page",children:Object(j.jsx)("div",{className:"calendar-div",children:Object(j.jsx)(U,{values:C})})})]}):null};n(50);var I=function(e){var t=e.error,n=e.setError,s=e.theme,r=e.setCurrentUser,i=e.switchTheme,l=Object(c.useState)(""),o=Object(a.a)(l,2),d=o[0],b=o[1],h=Object(c.useState)(""),m=Object(a.a)(h,2),O=m[0],x=m[1],p=Object(u.f)();return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"login-container",children:[Object(j.jsx)("img",{id:"login-logo",src:"light"==s?"https://i.ibb.co/0t4gR4Y/Screen-Shot-2022-04-11-at-12-31-51-PM-modified.png":"https://i.ibb.co/zSX5Ncj/Screen-Shot-2022-04-11-at-12-31-32-PM-modified.png",onClick:i}),Object(j.jsx)("div",{className:"login-box",children:Object(j.jsxs)("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:O})}).then((function(e){return e.json()})).then((function(t){if(t.error){n(t.error),e.target.className="shake";setTimeout((function(){e.target.className="login-form"}),500)}else n(null),r(t),p.push("/".concat(t.id,"/routines"))}))},children:[Object(j.jsx)("div",{className:"login-input-div",children:Object(j.jsx)("label",{children:Object(j.jsx)("input",{onChange:function(e){b(e.target.value)},placeholder:"Enter username",type:"text",className:"login-input",value:d})})}),Object(j.jsx)("div",{className:"login-input-div",children:Object(j.jsx)("label",{children:Object(j.jsx)("input",{onChange:function(e){x(e.target.value)},placeholder:"Enter password",type:"password",className:"login-input",value:O})})}),Object(j.jsxs)("div",{className:"login-button-div",children:[Object(j.jsx)("button",{type:"submit",className:"button",children:"Log in"}),Object(j.jsx)("p",{className:"error",children:t||null}),Object(j.jsxs)("div",{id:"sign-up-prompt",children:[Object(j.jsx)("p",{children:"New here?"}),Object(j.jsx)("p",{onClick:function(){return p.push("/signup")},children:"Sign Up"})]})]})]})})]})})};var P=function(e){var t=e.error,n=e.setError,s=e.setCurrentUser,r=Object(c.useState)(""),i=Object(a.a)(r,2),l=i[0],o=i[1],d=Object(c.useState)(""),b=Object(a.a)(d,2),h=b[0],m=b[1],O=Object(c.useState)(""),x=Object(a.a)(O,2),p=x[0],f=x[1],v=Object(c.useState)(""),g=Object(a.a)(v,2),N=g[0],S=g[1],C=Object(u.f)();return Object(c.useEffect)((function(){n(null)}),[]),Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"login-container",children:Object(j.jsx)("div",{className:"login-box",children:Object(j.jsxs)("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),N===h?fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l,password:h,name:p,image:"https://i.ibb.co/zSX5Ncj/Screen-Shot-2022-04-11-at-12-31-32-PM-modified.png",bio:"No bio yet!",is_private:!0})}).then((function(e){return e.json()})).then((function(t){t.errors?(n(t.errors),e.target.className="shake",setTimeout((function(){e.target.className="login-form"}),500)):(n(null),console.log("Sign Up Success"),s(t),C.push("/".concat(t.id,"/profile")))})):n("Passwords don't match")},children:[Object(j.jsx)("div",{className:"login-input-div",children:Object(j.jsx)("label",{children:Object(j.jsx)("input",{onChange:function(e){f(e.target.value)},placeholder:"Please enter your name",type:"text",className:"login-input",value:p})})}),Object(j.jsx)("div",{className:"login-input-div",children:Object(j.jsx)("label",{children:Object(j.jsx)("input",{onChange:function(e){o(e.target.value)},placeholder:"Create a username",type:"text",className:"login-input",value:l})})}),Object(j.jsx)("div",{className:"login-input-div",children:Object(j.jsx)("label",{children:Object(j.jsx)("input",{onChange:function(e){m(e.target.value)},placeholder:"Create a password",type:"password",className:"login-input",value:h})})}),Object(j.jsx)("div",{className:"login-input-div",children:Object(j.jsx)("label",{children:Object(j.jsx)("input",{onChange:function(e){S(e.target.value)},placeholder:"Confirm password",type:"password",className:"login-input",value:N})})}),Object(j.jsxs)("div",{className:"login-button-div",children:[Object(j.jsx)("button",{type:"submit",className:"button",children:"Sign Up"}),Object(j.jsx)("p",{className:"error",children:t||null}),Object(j.jsxs)("div",{id:"sign-up-prompt",children:[Object(j.jsx)("p",{children:"Have an account?"}),Object(j.jsx)("p",{onClick:function(){return C.push("/login")},children:"Log in"})]})]})]})})})})};n(51);var R=function(e){var t=e.currentUser,n=e.setRoutineId,c=e.routine,s=e.setSearch,r=e.handleDelete,i=e.setEdit,a=e.setModal,l=e.setEditedRoutine,o=c.name,u=c.description;return Object(j.jsxs)("div",{className:"routine-card",children:[Object(j.jsxs)("div",{className:"routine-buttons-div",children:[Object(j.jsx)("button",{name:c.id,id:"edit-routine",className:"button",onClick:function(e){return function(e){l(null),l(c),console.log(c),i(!0),a(!0),n(e.target.name)}(e)},title:"Edit routine",children:"\u270e"}),Object(j.jsx)("button",{name:c.id,id:"delete-routine",className:"button",onClick:r,title:"Delete routine",children:"x"})]}),Object(j.jsx)(d.b,{to:t?"/".concat(t.id,"/routines/").concat(c.id):"/login",className:"nav-text",children:Object(j.jsxs)("div",{className:"routine-details",onClick:function(){return s("")},children:[Object(j.jsx)("h3",{children:o}),Object(j.jsx)("div",{id:"card-description-div",children:Object(j.jsxs)("p",{id:"card-description",children:["Description: ",u]})}),c.exercises?Object(j.jsxs)("p",{children:["Exercises: ",c.exercises.length]}):null]})})]})},_=n(19),J=n(9),A=n(13);var L=function(e){var t=e.setModal,n=e.currentUser,s=e.setRoutines,r=(e.routines,e.edit,e.setEdit,Object(c.useState)({name:"",description:"",image:""})),i=Object(a.a)(r,2),l=i[0],o=i[1],u=Object(c.useState)(null),d=Object(a.a)(u,2),b=d[0],h=d[1];function m(e){var t,c=e.target.value;o(Object(A.a)(Object(A.a)({},l),{},(t={},Object(J.a)(t,e.target.name,c),Object(J.a)(t,"user_id",n.id),t))),console.log(l)}return Object(j.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),fetch("/routines",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(e){return e.json()})).then((function(e){e.errors?(h(e.errors),console.log(e.errors),t(!0)):(console.log(e),s((function(t){return[].concat(Object(_.a)(t),[e])})),t(!1),h(!1))}))},children:[Object(j.jsx)("h3",{className:"form-label",children:"Name"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{className:"form-input",onChange:m,type:"text",name:"name",placeholder:"Name of routine",value:l.name})}),Object(j.jsx)("h3",{className:"form-label",children:"Description"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{className:"form-input",onChange:m,type:"text",name:"description",placeholder:"Description of routine",value:l.description})}),Object(j.jsx)("h3",{className:"form-label",children:"Image"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{className:"form-input",onChange:m,type:"text",name:"image",placeholder:"Image (URL) for routine",value:l.image})}),Object(j.jsx)("input",{onClick:function(){return t(!1)},className:"button",id:"modal-submit",type:"submit",value:"Submit"}),Object(j.jsx)("p",{className:"error",children:b||null})]})};var V=function(e){var t=e.setModal,n=e.routines,s=e.setRoutines,r=e.setEdit,i=e.routineId,l=e.editedRoutine,o=Object(c.useState)({name:l.name,description:l.description,image:l.image}),u=Object(a.a)(o,2),d=u[0],b=u[1],h=Object(c.useState)(null),m=Object(a.a)(h,2),O=m[0],x=m[1];function p(e){var t=e.target.value;b(Object(A.a)(Object(A.a)({},d),{},Object(J.a)({},e.target.name,t))),console.log(d)}return Object(j.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),fetch("/routines/".concat(i),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){if(e.errors)x(e.errors),console.log(e.errors),t(!0);else{var c=n.map((function(t){return t.id===e.id?e:t}));s(c),t(!1),r(!1),x(!1)}}))},children:[Object(j.jsx)("h3",{className:"form-label",children:"Name"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{className:"form-input",onChange:p,type:"text",name:"name",value:d.name})}),Object(j.jsx)("h3",{className:"form-label",children:"Description"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{className:"form-input",onChange:p,type:"text",name:"description",value:d.description})}),Object(j.jsx)("h3",{className:"form-label",children:"Image"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{className:"form-input",onChange:p,type:"text",name:"image",value:d.image})}),Object(j.jsx)("input",{onClick:function(){return t(!1)},className:"button",id:"modal-submit",type:"submit",value:"Submit"}),Object(j.jsx)("p",{className:"error",children:O||null})]})};var H=function(e){var t,n,s=e.currentUser,r=e.setSearch,i=e.search,l=e.modal,o=e.setModal,u=e.edit,d=e.setEdit,b=e.routineId,h=e.setRoutineId,m=e.routines,O=e.setRoutines,x=e.setExercises,p=Object(c.useState)(null),f=Object(a.a)(p,2),v=f[0],g=f[1];function N(e){fetch("/routines/".concat(e.target.name),{method:"DELETE"}),O((function(t){return t.filter((function(t){return t.id!=e.target.name}))})),x((function(t){return t.filter((function(t){return t.routine_id!=e.target.name}))}))}return Object(c.useEffect)((function(){fetch("/routines").then((function(e){return e.json()})).then((function(e){O(e)})),fetch("/exercises").then((function(e){return e.json()})).then((function(e){x(e)}))}),[]),m&&(t=m.filter((function(e){return e.name.toUpperCase().includes(i.toUpperCase())||e.description.toUpperCase().includes(i.toUpperCase())}))),t&&(n=t.map((function(e){return Object(j.jsx)(R,{routine:e,setModal:o,handleDelete:N,setEdit:d,setRoutineId:h,setEditedRoutine:g,currentUser:s,setSearch:r},e.id)}))),Object(j.jsxs)("div",{className:"routine-page-holder",children:[Object(j.jsx)("div",{className:"routine-cards-holder",children:n}),Object(j.jsxs)("div",{className:l?"modal-active":"modal",id:"modal",children:[Object(j.jsxs)("div",{className:"modal-header",children:[Object(j.jsx)("div",{className:"title",children:u?"Edit Routine":"Create New Routine"}),Object(j.jsx)("button",{onClick:function(){o(!1),d(!1),g(null)},className:"close-button",children:"x"})]}),Object(j.jsx)("div",{className:"modal-body",children:u?Object(j.jsx)(V,{setModal:o,setRoutines:O,setEdit:d,routines:m,routineId:b,editedRoutine:v}):Object(j.jsx)(L,{setEdit:d,edit:u,setRoutines:O,currentUser:s,setModal:o})})]}),Object(j.jsx)("div",{id:l?"overlay-active":"overlay",onClick:function(){o(!1),d(!1)}})]})},z=(n(52),n(53),n.p+"static/media/mHi.5f72c25c.mp3"),B=n.p+"static/media/mLo.1cae7d5f.mp3";var K=function(e){var t=e.updateCalendar,n=e.currentExercise,s=e.setError,r=e.exercises,i=e.setExercises,l=e.timer,o=e.setTimer,u=e.playing,d=e.setPlaying,b=Object(c.useState)(120),h=Object(a.a)(b,2),m=h[0],O=h[1],x=Object(c.useState)(120),p=Object(a.a)(x,2),f=p[0],v=p[1],g=Object(c.useState)(4),N=Object(a.a)(g,2),S=N[0],C=(N[1],new Audio(z)),y=new Audio(B),E=Object(c.useRef)(0);function k(){console.log(E.current),console.log(S),E.current%S===0?(C.play(),C.currentTime=0):E.current===S?(y.play(),E.current=0):(y.play(),y.currentTime=0),E.current=(E.current+1)%S}return Object(c.useEffect)((function(){n&&(O(n.bpm),v(n.bpm))}),[n]),Object(j.jsxs)("div",{className:"metronome",children:[f!=m&&n?Object(j.jsx)("button",{onClick:function(e){return function(e,n){v(e),n&&e&&fetch("/exercises/".concat(n),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({bpm:e})}).then((function(e){return e.json()})).then((function(e){if(e.errors)s(e.errors),console.log(e.errors);else{var t=r.map((function(t){return t.id===e.id?e:t}));i(t),s(!1)}})),t()}(e.target.name,e.target.id)},name:m,className:"button",id:n?n.id:null,children:"Save BPM"}):null,Object(j.jsxs)("div",{className:"bpm-slider",children:[Object(j.jsxs)("p",{className:"bpm-display",children:[m," BPM"]}),Object(j.jsx)("input",{type:"range",min:"50",max:"300",value:m,onChange:function(e){O(e.target.value),u?(clearInterval(l),o(setInterval(k,60/e.target.value*1e3)),E.current=0,O(e.target.value)):O(e.target.value)}})]}),Object(j.jsx)("button",{onClick:function(){u?(clearInterval(l),d(!1)):(o(setInterval(k,60/m*1e3)),E.current=0,d(!0),k())},className:"button",id:"start-met",children:u?"Stop":"Start"})]})};var X=function(e){var t=e.currentExercise,n=e.updateCalendar,s=e.setError,r=e.exercises,i=e.setExercises,l=e.timer,o=e.setTimer,u=e.playing,d=e.setPlaying,b=Object(c.useState)(null),h=Object(a.a)(b,2),m=h[0],O=h[1];return Object(c.useEffect)((function(){if(t&&console.log(t),t&&t.video_url){var e=function(e){var t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,n=e.match(t);return n&&11===n[2].length?n[2]:null}(t.video_url);O(e)}}),[t,r]),Object(j.jsxs)("div",{className:"dock",children:[m?Object(j.jsx)("iframe",{id:"iframe",title:t?t.name:"video player",src:"https://www.youtube.com/embed/".concat(m)}):Object(j.jsx)("div",{className:"iframe-placeholder"}),Object(j.jsx)("div",{id:"metronome",children:Object(j.jsx)(K,{currentExercise:t,setError:s,exercises:r,setExercises:i,timer:l,setTimer:o,playing:u,setPlaying:d,updateCalendar:n})}),Object(j.jsxs)("div",{id:"exercise-notes-div",children:[t?Object(j.jsx)("p",{id:"exercise-notes",children:t.notes}):null,Object(j.jsx)("div",{className:"spacer"})]})]})};var Y=function(e){var t=e.timer,n=e.setPlaying,c=e.exercise,s=e.setModal,r=e.handleDelete,i=e.setEdit,a=e.currentExercise,l=e.setExerciseId,o=e.setEditedExercise,u=e.handleExerciseClick;return Object(j.jsxs)("div",{className:a&&c.id===a.id?"selected-exercise-card":"exercise-card",onClick:function(){u(c),clearInterval(t),n(!1)},children:[Object(j.jsxs)("div",{className:"exercise-buttons-div",children:[Object(j.jsx)("button",{name:c.id,id:"edit-exercise",className:"button",onClick:function(e){return function(e){o(null),o(c),i(!0),s(!0),l(e.target.name)}(e)},title:"Edit exercise",children:"\u270e"}),Object(j.jsx)("button",{name:c.id,id:"delete-exercise",className:"button",onClick:r,title:"Delete exercise",children:"x"})]}),Object(j.jsxs)("div",{className:"exercise-details",children:[Object(j.jsx)("h3",{children:c.name}),Object(j.jsx)("div",{id:"card-description-div",children:Object(j.jsxs)("p",{id:"card-description",children:["Description: ",c.description]})})]})]})};var q=function(e){var t=e.setModal,n=e.currentUser,s=e.setExercises,r=e.routineId,i=e.setExerciseCount,l=Object(c.useState)({name:"",description:"",video_url:""}),o=Object(a.a)(l,2),u=o[0],d=o[1],b=Object(c.useState)(null),h=Object(a.a)(b,2),m=h[0],O=h[1];function x(e){var t,c=e.target.value;d(Object(A.a)(Object(A.a)({},u),{},(t={},Object(J.a)(t,e.target.name,c),Object(J.a)(t,"routine_id",r),Object(J.a)(t,"is_private",!0),Object(J.a)(t,"bpm",120),Object(J.a)(t,"user_id",n.id),t)))}return Object(j.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),fetch("/exercises",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){e.errors?(O(e.errors),t(!0)):(console.log(e),s((function(t){return[].concat(Object(_.a)(t),[e])})),i((function(e){return e+1})),t(!1),O(!1),d({name:"",description:"",video_url:""}))}))},children:[Object(j.jsx)("h3",{className:"form-label",children:"Name"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{className:"form-input",onChange:x,type:"text",name:"name",placeholder:"Name of exercise",value:u.name})}),Object(j.jsx)("h3",{className:"form-label",children:"Description"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{className:"form-input",onChange:x,type:"text",name:"description",placeholder:"Description of exercise",value:u.description})}),Object(j.jsx)("h3",{className:"form-label",children:"Video URL"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{className:"form-input",onChange:x,type:"text",name:"video_url",placeholder:"Video for exercise (if applicable)",value:u.video_url})}),Object(j.jsx)("input",{onClick:function(){return t(!1)},className:"button",id:"modal-submit",type:"submit",value:"Submit"}),Object(j.jsx)("p",{className:"error",children:m||null})]})};var F=function(e){var t=e.setModal,n=e.exercises,s=e.setExercises,r=e.setEdit,i=e.exerciseId,l=e.editedExercise,o=e.setCurrentExercise,u=Object(c.useState)({name:l.name,description:l.description,video_url:l.video_url,notes:l.notes}),d=Object(a.a)(u,2),b=d[0],h=d[1],m=Object(c.useState)(null),O=Object(a.a)(m,2),x=O[0],p=O[1];function f(e){var t=e.target.value;h(Object(A.a)(Object(A.a)({},b),{},Object(J.a)({},e.target.name,t))),console.log(b)}return Object(c.useEffect)((function(){})),Object(j.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),fetch("/exercises/".concat(i),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then((function(e){return e.json()})).then((function(e){if(e.errors)p(e.errors),t(!0);else{o(e);var c=n.map((function(t){return t.id===e.id?e:t}));s(c),t(!1),r(!1),p(!1)}}))},children:[Object(j.jsx)("h3",{className:"form-label",children:"Name"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{className:"form-input",onChange:f,type:"text",name:"name",value:b.name})}),Object(j.jsx)("h3",{className:"form-label",children:"Description"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{className:"form-input",onChange:f,type:"text",name:"description",value:b.description})}),Object(j.jsx)("h3",{className:"form-label",children:"Video URL"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{className:"form-input",onChange:f,type:"text",name:"video_url",value:b.video_url})}),Object(j.jsx)("h3",{className:"form-label",children:"Notes"}),Object(j.jsx)("label",{children:Object(j.jsx)("input",{id:"notes-input",className:"form-input",onChange:f,type:"text",name:"notes",value:b.notes})}),Object(j.jsx)("input",{onClick:function(){return t(!1)},className:"button",id:"modal-submit",type:"submit",value:"Submit"}),Object(j.jsx)("p",{className:"error",children:x||null})]})};var G=function(e){var t,n,s=e.setModal,r=e.modal,i=e.search,l=e.currentUser,o=e.routines,d=e.setError,b=e.setExerciseCount,h=e.exercises,m=e.setExercises,O=Object(u.g)().routineId,x=Object(c.useState)(),p=Object(a.a)(x,2),f=p[0],v=p[1],g=Object(c.useState)({}),N=Object(a.a)(g,2),S=N[0],C=N[1],y=Object(c.useState)(),E=Object(a.a)(y,2),k=E[0],M=E[1],w=Object(c.useState)(),T=Object(a.a)(w,2),U=T[0],D=T[1],I=Object(c.useState)(!1),P=Object(a.a)(I,2),R=P[0],_=P[1],J=Object(c.useState)(null),A=Object(a.a)(J,2),L=A[0],V=A[1],H=Object(c.useState)(!1),z=Object(a.a)(H,2),B=z[0],K=z[1];function G(e){fetch("/exercises/".concat(e.target.name),{method:"DELETE"}),m((function(t){return t.filter((function(t){return t.id!=e.target.name}))})),b((function(e){return e-1}))}function Q(e){v(e)}return Object(c.useEffect)((function(){k&&v(h.find((function(e){return e.id=k}))),C(o.find((function(e){return e.id==O}))),console.log(o.find((function(e){return e.id==O})))}),[o]),h&&(t=h.filter((function(e){return e.name.toUpperCase().includes(i.toUpperCase())||e.description.toUpperCase().includes(i.toUpperCase())}))),t&&(n=t.filter((function(e){return e.routine_id==O})).map((function(e){return Object(j.jsx)(Y,{exercise:e,setModal:s,handleDelete:G,setEdit:_,handleExerciseClick:Q,setExerciseId:M,setEditedExercise:D,currentExercise:f,timer:L,setPlaying:K},e.id)}))),Object(j.jsxs)("div",{className:"exercise-page-holder",children:[Object(j.jsxs)("div",{className:"non-dock-holder",children:[Object(j.jsxs)("div",{className:"sidebar",children:[Object(j.jsxs)("div",{className:"sidebar-details",children:[Object(j.jsx)("img",{src:S?S.image:"https://wallpaperbat.com/img/278205-music-sheet-wallpaper.jpg",alt:"routine background",className:"sidebar-image",onError:function(e){e.target.src="https://wallpaperbat.com/img/278205-music-sheet-wallpaper.jpg"}}),Object(j.jsxs)("div",{className:"sidebar-text",children:[Object(j.jsx)("h2",{children:S?S.name:"name"}),Object(j.jsx)("p",{children:S?S.description:"description"})]})]}),Object(j.jsx)("button",{id:"new-exercise",title:"create new exercise",onClick:function(){s(!0),_(!1)},className:"button",children:"Add Exercise"})]}),Object(j.jsx)("div",{className:"exercise-cards-holder",children:n||null})]}),Object(j.jsx)("div",{className:"dock-holder",children:Object(j.jsx)(X,{currentExercise:f,updateCalendar:function(){fetch("/calendar_dates").then((function(e){return e.json()})).then((function(e){e.includes((new Date).toISOString().split("T")[0])?console.log("already in there"):fetch("/calendar_dates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:l.id,date:(new Date).toISOString().split("T")[0]})}).then((function(e){return e.json()})).then((function(e){e.errors?d(e.errors):console.log(e)}))}))},setError:d,exercises:h,setExercises:m,timer:L,setTimer:V,playing:B,setPlaying:K})}),Object(j.jsxs)("div",{className:r?"modal-active":"modal",id:"modal",children:[Object(j.jsxs)("div",{className:"modal-header",children:[Object(j.jsx)("div",{className:"title",children:R?"Edit Exercise":"Create New Exercise"}),Object(j.jsx)("button",{onClick:function(){s(!1),_(!1),D(null)},className:"close-button",children:"x"})]}),Object(j.jsx)("div",{className:"modal-body",children:R?Object(j.jsx)(F,{setModal:s,setExercises:m,setEdit:_,exercises:h,exerciseId:k,editedExercise:U,setCurrentExercise:v}):Object(j.jsx)(q,{setExercises:m,routineId:O,currentUser:l,setModal:s,setExerciseCount:b})})]}),Object(j.jsx)("div",{id:r?"overlay-active":"overlay",onClick:function(){s(!1),_(!1)}})]})};var Q=function(){var e=Object(c.useState)(),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(),i=Object(a.a)(r,2),l=i[0],d=i[1],m=Object(c.useState)([]),O=Object(a.a)(m,2),x=O[0],p=O[1],f=Object(c.useState)([]),v=Object(a.a)(f,2),g=v[0],N=v[1],S=Object(c.useState)(),C=Object(a.a)(S,2),y=C[0],E=C[1],k=Object(c.useState)(null),M=Object(a.a)(k,2),w=M[0],T=M[1],U=Object(c.useState)(!1),R=Object(a.a)(U,2),_=R[0],J=R[1],A=Object(c.useState)(null),L=Object(a.a)(A,2),V=L[0],z=L[1],B=Object(c.useState)(),K=Object(a.a)(B,2),X=K[0],Y=K[1],q=Object(c.useState)(),F=Object(a.a)(q,2),Q=F[0],W=F[1],Z=Object(c.useState)(""),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=Object(u.f)(),ce=window.matchMedia("(prefers-color-scheme: dark)").matches,se=o()("theme",ce?"dark":"light"),re=Object(a.a)(se,2),ie=re[0],ae=re[1],le=function(){ae("light"===ie?"dark":"light")};return Object(c.useEffect)((function(){fetch("/current_user").then((function(e){return e.json()})).then((function(e){e.id?d(e.id):ne.push("/login"),e.username?s(e):ne.push("/login")})),fetch("/routines").then((function(e){return e.json()})).then((function(e){p(e)})),fetch("/exercises").then((function(e){return e.json()})).then((function(e){N(e)})),z(null)}),[ne]),Object(c.useEffect)((function(){n&&(W(g.length),Y(x.length))}),[x,g,n]),Object(j.jsxs)("div",{className:"App-container","data-theme":ie,children:[Object(j.jsx)(b,{currentUser:n,setRoutines:p,setExercises:N,setCurrentUser:s,theme:ie}),n?Object(j.jsx)(h,{switchTheme:le,theme:ie,setModal:T,userId:l,setEdit:J,search:ee,setSearch:te}):null,Object(j.jsxs)(u.c,{children:[Object(j.jsx)(u.a,{exact:!0,path:"/:userId/profile",children:Object(j.jsx)(D,{currentUser:n,error:V,theme:ie,setCurrentUser:s,exerciseCount:Q,routineCount:X})}),Object(j.jsx)(u.a,{exact:!0,path:"/login",children:Object(j.jsx)(I,{error:V,setError:z,setCurrentUser:s,theme:ie,switchTheme:le})}),Object(j.jsx)(u.a,{exact:!0,path:"/signup",children:Object(j.jsx)(P,{error:V,setError:z,setCurrentUser:s})}),Object(j.jsx)(u.a,{exact:!0,path:"/:userId/routines",children:Object(j.jsx)(H,{currentUser:n,modal:w,setModal:T,edit:_,search:ee,setEdit:J,routineId:y,routines:x,setRoutines:p,setRoutineId:E,exercises:g,setExercises:N,setSearch:te})}),Object(j.jsx)(u.a,{exact:!0,path:"/:userId/routines/:routineId",children:Object(j.jsx)(G,{exercises:g,setExercises:N,currentUser:n,modal:w,setModal:T,routines:x,setError:z,setExerciseCount:W,search:ee})})]})]})};i.a.render(Object(j.jsx)(d.a,{children:Object(j.jsx)(Q,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.68f7a0c9.chunk.js.map